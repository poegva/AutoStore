(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{167:function(e,t,a){e.exports=a(210)},172:function(e,t,a){},210:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),l=(a(172),a(93)),i=a(25),u=a(57),d=a(15),s=a(20),m=a(37),p=a.n(m),f=a(45),E=a.n(f),b=a(250),y=a(271),h=a(256),O=a(134),g=a.n(O),v=a(272),j=a(253),C=a(255),T=a(254),x=a(133),k=a.n(x),I=a(251),S=a(18),w=a(252);var _=Object(S.b)((function(e){return{cartCount:Object.values(e.order.cart).reduce((function(e,t){return e+t.quantity}),0)}}),(function(e){return{}}))((function(e){var t=E()(),a=!Object(b.a)(t.breakpoints.down("sm"));if(0===e.cartCount)return null;var n=r.a.createElement(I.a,{badgeContent:e.cartCount,color:"secondary",onClick:function(){e.setCartOpen(!0)}},r.a.createElement(k.a,{style:{color:"black"}}));return e.floating?a?r.a.createElement(w.a,{style:{position:"fixed",alignSelf:"end",right:30,top:130,backgroundColor:"white"},onClick:function(){return e.setCartOpen(!0)}},n):null:n})),D=p()((function(e){return{appLogo:Object(s.a)({},e.breakpoints.down("sm"),{height:"60px"}),toolbarLink:{padding:e.spacing(1),flexShrink:0,fontSize:"large",color:"black",fontFamily:"roboto"}}}));function N(e){var t=D(),a=E()(),n=!Object(b.a)(a.breakpoints.down("sm")),o=r.a.useState(!1),c=Object(i.a)(o,2),l=c[0],d=c[1];return n?r.a.createElement(j.a,{position:"static",style:{backgroundColor:"white",boxShadow:"none"}},r.a.createElement(T.a,null,r.a.createElement(C.a,{style:{justifyContent:n?"flex-start":"space-between"}},r.a.createElement("img",{src:e.image,className:t.appLogo,alt:""}),r.a.createElement(y.a,null,e.sections.map((function(e){return r.a.createElement(h.a,{key:e.title,href:e.url,className:t.toolbarLink,component:u.b,to:e.url},e.title)})))))):r.a.createElement(j.a,{position:"sticky",style:{backgroundColor:"white",boxShadow:"none"}},r.a.createElement(C.a,{style:{justifyContent:"space-between"}},r.a.createElement("img",{src:e.image,className:t.appLogo,alt:""}),r.a.createElement(_,{setCartOpen:e.setCartOpen}),r.a.createElement(g.a,{style:{color:"black"},fontSize:"large",onClick:function(){return d(!0)}}),r.a.createElement(v.a,{open:l,onClose:function(){return d(!1)}},r.a.createElement(y.a,{display:"flex",flexDirection:"column"},e.sections.map((function(e){return r.a.createElement(h.a,{key:e.title,href:e.url,className:t.toolbarLink,component:u.b,to:e.url,onClick:function(){return d(!1)}},e.title)}))))))}var B=a(151);function R(e){return r.a.createElement(T.a,null,r.a.createElement(B.a,{variant:"h2",gutterBottom:!0,align:"center",component:"h2"},e.title),r.a.createElement(B.a,{variant:"h4",gutterBottom:!0,align:"center"},e.subtitle))}function q(e){return function(t){t({type:"ADD_ITEM",payload:e})}}var A=a(262),M=a(260),L=a(261),P=a(258),V=a(259),U=p()((function(e){return{media:Object(s.a)({height:350},e.breakpoints.down("sm"),{height:"150px"}),buyButton:{backgroundColor:"black",color:"white","&:hover":{backgroundColor:"gray"}},itemCard:{height:"100%",display:"flex",flexDirection:"column"}}}));function z(e){var t=U(),a=E()(),n=null;return n=Object(b.a)(a.breakpoints.up("sm"))?r.a.createElement(P.a,{style:{flexGrow:"1"}},r.a.createElement(y.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},r.a.createElement(B.a,{gutterBottom:!0,variant:"h6",component:"h2",align:"center"},e.item.name),r.a.createElement(y.a,{display:"flex",flexDirection:"row",justifyContent:"space-around",bgcolor:"background.paper"},r.a.createElement(V.a,{className:t.buyButton,onClick:e.addItem},"\u041a\u0443\u043f\u0438\u0442\u044c"),r.a.createElement(B.a,{gutterBottom:!0,variant:"h6",component:"h6",align:"center"},e.item.price," \u20bd")))):r.a.createElement(P.a,{style:{paddingBottom:0,flexGrow:"1"}},r.a.createElement(y.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},r.a.createElement(B.a,{gutterBottom:!0,variant:"body2",component:"h2",align:"center",paragraph:!0},e.item.name),r.a.createElement(y.a,null,r.a.createElement(y.a,{display:"flex",flexDirection:"row",justifyContent:"space-around",bgcolor:"background.paper"},r.a.createElement(V.a,{className:t.buyButton,onClick:e.addItem},"\u041a\u0443\u043f\u0438\u0442\u044c")),r.a.createElement(B.a,{gutterBottom:!0,variant:"body1",component:"h6",align:"center",style:{paddingTop:5}},e.item.price," \u20bd")))),r.a.createElement(M.a,{style:{height:"100%",flexFlow:"column",display:"flex"}},r.a.createElement(L.a,{image:e.item.image,title:e.item.name,className:t.media}),n)}var W=p()((function(e){return{itemGrid:{paddingTop:e.spacing(4),paddingBottom:e.spacing(8)}}}));function G(e){var t=W();return r.a.createElement(T.a,{maxWidth:"lg",className:t.itemGrid},r.a.createElement(A.a,{container:!0,spacing:2},e.items.map((function(a){return r.a.createElement(A.a,{item:!0,xs:6,sm:4,md:3,key:a.id,className:t.itemCard},r.a.createElement(z,{item:a,addItem:function(){return e.addItem(a)}}))}))))}var Y=a(135),F=a.n(Y),H=a(263);function J(e){var t,a,n,o;return e.error?r.a.createElement(y.a,{display:"flex",flexDirection:"column",justifyContent:"center",style:{paddingTop:20}},r.a.createElement(F.a,{color:"secondary",fontSize:"large",style:{alignSelf:"center"}}),r.a.createElement(B.a,{align:"center",component:"h5",variant:null!==(t=e.variant)&&void 0!==t?t:"h5"},null!==(a=e.errorText)&&void 0!==a?a:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438")):r.a.createElement(y.a,{display:"flex",flexDirection:"column",justifyContent:"center",style:{paddingTop:20}},r.a.createElement(H.a,{style:{alignSelf:"center"}}),r.a.createElement(B.a,{align:"center",component:"h5",variant:null!==(n=e.variant)&&void 0!==n?n:"h5"},null!==(o=e.loadingText)&&void 0!==o?o:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))}var Z=Object(S.b)((function(e){return{}}),(function(e){return{addItem:function(t){return e(q(t))}}}))((function(e){var t=r.a.useState(null),a=Object(i.a)(t,2),n=a[0],o=a[1],c=r.a.useState(!1),l=Object(i.a)(c,2),u=l[0],d=l[1];return r.a.useEffect((function(){n||fetch("http://".concat(window.location.hostname,"/api/items/")).then((function(e){return e.json()})).then((function(e){return o(e)}),(function(e){return d(!0)}))}),[n]),r.a.createElement(T.a,{style:{paddingTop:20}},r.a.createElement(R,{title:"HQD Cuvie",subtitle:"\u0423\u0441\u043f\u0435\u0439 \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0432\u043a\u0443\u0441\u044b!"}),n?r.a.createElement(G,{items:n,addItem:e.addItem}):r.a.createElement(J,{error:u,errorText:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",loadingText:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}))})),$=a(267),Q=a(91),K=a.n(Q),X=a(136),ee=a.n(X),te=a(137),ae=a.n(te),ne=a(264),re=p()((function(e){return{itemCard:{marginTop:e.spacing(1),marginBottom:e.spacing(1),display:"flex",justifyContent:"flex-start"},itemContent:{width:"100%"},itemImage:{width:"100px"},quantityFlex:{display:"flex"}}}));function oe(e){return e.cart?r.a.createElement(y.a,{display:"flex"},r.a.createElement(ne.a,{size:"small",onClick:e.removeItem},r.a.createElement(ee.a,null)),r.a.createElement(B.a,{component:"h6",variant:"body1",style:{paddingLeft:7,paddingRight:7,paddingTop:5}},e.quantity),r.a.createElement(ne.a,{size:"small",onClick:e.addItem},r.a.createElement(ae.a,null))):r.a.createElement(y.a,{display:"flex"},r.a.createElement(B.a,{component:"h6",variant:"body1",style:{paddingTop:5}},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ",e.quantity))}function ce(e){var t=re();return r.a.createElement(M.a,{className:t.itemCard},r.a.createElement(L.a,{className:t.itemImage,image:e.item.image,title:e.item.name}),r.a.createElement(P.a,{className:t.itemContent,style:{padding:16}},r.a.createElement(y.a,{display:"flex",justifyContent:"space-between",width:"100%"},r.a.createElement(B.a,{component:"h6",variant:"h6"},e.item.name),e.cart?r.a.createElement(ne.a,{size:"small",onClick:e.deleteItem},r.a.createElement(K.a,null)):null),r.a.createElement(y.a,{display:"flex",justifyContent:"space-between",width:"100%"},r.a.createElement(oe,{quantity:e.quantity,cart:e.cart,removeItem:e.removeItem,addItem:e.addItem}),r.a.createElement(B.a,{component:"h6",variant:"body1",style:{paddingTop:5},align:"center"},e.item.price*e.quantity))))}var le=Object(S.b)((function(e){return{cart:e.order.cart}}),(function(e){return{addItem:function(t){return e(q(t))},removeItem:function(t){return e(function(e){return function(t){t({type:"REMOVE_ITEM",payload:e})}}(t))},deleteItem:function(t){return e(function(e){return function(t){t({type:"DELETE_ITEM",payload:e})}}(t))}}}))((function(e){return r.a.createElement(T.a,{style:{paddingTop:20,paddingBottom:40}},r.a.createElement(B.a,{component:"h5",variant:"h5",align:"center",style:{paddingBottom:30}},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"),r.a.createElement(y.a,{display:"flex",flexDirection:"column",justifyContent:"center"},Object.values(e.cart).map((function(t){return r.a.createElement(ce,{item:t.item,quantity:t.quantity,key:t.item.id,cart:!0,addItem:function(){return e.addItem(t.item)},removeItem:function(){return e.removeItem(t.item)},deleteItem:function(){return e.deleteItem(t.item)}})}))))})),ie=a(148),ue=a(138),de=a.n(ue),se=a(268);function me(e){var t=e.inputRef,a=Object(ie.a)(e,["inputRef"]);return r.a.createElement(de.a,Object.assign({},a,{ref:function(e){t(e?e.inputElement:null)},mask:["+","7"," ","(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,"-",/\d/,/\d/],placeholderChar:"\u2000"}))}function pe(e){var t,a;return r.a.createElement(se.a,{label:e.label,value:null!==(t=e.value)&&void 0!==t?t:"",onChange:function(t){e.resetError(),e.setValue(t.target.value)},name:e.name,id:e.id,variant:"outlined",required:e.required,className:e.className,error:e.error,helperText:null!==(a=e.helperText)&&void 0!==a?a:"",style:{paddingBottom:20},InputProps:{inputComponent:me}})}var fe=a(139),Ee=a(140),be=a(149),ye=a(147),he=p()((function(e){return{dialogContainer:{paddingBottom:e.spacing(4)},formContainer:{display:"flex",flexDirection:"column"},formInput:{paddingBottom:e.spacing(4)},submitButton:{backgroundColor:"black",color:"white","&:hover":{backgroundColor:"gray"}},backButton:{}}}));function Oe(e){var t=he();return r.a.createElement(V.a,{onClick:e.onClick,className:e.submit?t.submitButton:t.backButton},e.children)}var ge=function(e){Object(be.a)(a,e);var t=Object(ye.a)(a);function a(e){var n;Object(fe.a)(this,a),n=t.call(this,e);var r=[];return e.children&&(r=Array.isArray(e.children)?e.children:[e.children]),n.state=Object.fromEntries(r.map((function(e){return[e.props.id,{error:!1,helperText:""}]}))),n}return Object(Ee.a)(a,[{key:"validate",value:function(e){var t=this,a=!0,n=[];e.children&&(n=Array.isArray(e.children)?e.children:[e.children]),n.forEach((function(e){!e.props.required||e.props.value&&""!==e.props.value?e.props.validate&&!e.props.validate(e.props.value)?(a=!1,t.setState(Object(s.a)({},e.props.id,{error:!0,helperText:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}))):t.setState(Object(s.a)({},e.props.id,{error:!1,helperText:""})):(a=!1,t.setState(Object(s.a)({},e.props.id,{error:!0,helperText:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"})))})),a&&e.submit&&e.submit()}},{key:"render",value:function(){var e=this;return r.a.createElement(T.a,{style:{display:"flex",flexDirection:"column"}},r.a.Children.map(this.props.children,(function(t){return r.a.cloneElement(t,{error:e.state[t.props.id].error,helperText:e.state[t.props.id].helperText,resetError:function(){e.setState(Object(s.a)({},t.props.id,{error:!1,helperText:""}))}})})),r.a.createElement(Oe,{submit:!0,onClick:function(){return e.validate(e.props)}},"\u0414\u0430\u043b\u0435\u0435"),this.props.returnBack?r.a.createElement(Oe,{onClick:this.props.returnBack},"\u041d\u0430\u0437\u0430\u0434"):null)}}]),a}(r.a.Component);function ve(e){var t,a;return r.a.createElement(se.a,{label:e.label,value:null!==(t=e.value)&&void 0!==t?t:"",onChange:function(t){e.resetError(),e.setValue(t.target.value)},name:e.name,id:e.id,variant:"outlined",required:e.required,className:e.className,error:e.error,helperText:null!==(a=e.helperText)&&void 0!==a?a:"",style:{paddingBottom:20}})}var je=Object(S.b)((function(e){return{order:e.order}}),(function(e){return{setName:function(t){return e(function(e){return function(t){t({type:"SET_NAME",payload:e})}}(t))},setEmail:function(t){return e(function(e){return function(t){t({type:"SET_EMAIL",payload:e})}}(t))},setPhone:function(t){return e(function(e){return function(t){t({type:"SET_PHONE",payload:e})}}(t))},submitContacts:function(){return e((function(e){e({type:"SUBMIT_CONTACTS"})}))}}}))((function(e){return r.a.createElement(T.a,{style:{paddingTop:20,paddingBottom:20}},r.a.createElement(B.a,{component:"h5",variant:"h5",align:"center",style:{paddingBottom:40}},"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"),r.a.createElement(ge,{submit:e.submitContacts},r.a.createElement(ve,{id:"name",label:"\u0418\u043c\u044f",value:e.order.contacts.name,setValue:e.setName,required:!0}),r.a.createElement(pe,{id:"phone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",value:e.order.contacts.phone,setValue:e.setPhone,required:!0}),r.a.createElement(ve,{id:"email",label:"Email",value:e.order.contacts.email,setValue:e.setEmail,required:!0,validate:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}})))})),Ce=a(269),Te=a(141),xe=a.n(Te);function ke(e){var t=r.a.useState(""),a=Object(i.a)(t,2),n=a[0],o=a[1],c=r.a.useState([]),u=Object(i.a)(c,2),d=u[0],s=u[1],m=r.a.useMemo((function(){return xe()((function(e,t){fetch("http://".concat(window.location.hostname,"/api/delivery/complete/?address=").concat(e)).then((function(e){return e.json()})).then(t)}),500)}),[]);return r.a.useEffect((function(){var t=!0;if(console.log(n),""!==n)return m(n,(function(e){if(t){var a=[];e&&(a=e),s(a)}})),function(){t=!1};s(e.value?[e.value]:[])}),[e.value,n,m]),r.a.createElement(Ce.a,{id:"address",getOptionLabel:function(e){return e.address},filterOptions:function(e){return e},options:d,noOptionsText:"\u0410\u0434\u0440\u0435\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",autoComplete:!0,includeInputInList:!0,value:e.value,onChange:function(t,a){s(a?[a].concat(Object(l.a)(d)):d),e.resetError(),e.setValue(a)},onInputChange:function(e,t){o(t)},renderInput:function(t){var a;return r.a.createElement(se.a,Object.assign({},t,{label:e.label,name:e.name,id:e.id,variant:"outlined",required:e.required,className:e.className,error:e.error,helperText:null!==(a=e.helperText)&&void 0!==a?a:"",style:{paddingBottom:20}}))}})}var Ie=a(273),Se=a(274),we=a(266),_e=a(265),De=a(270);function Ne(e){return e.option?r.a.createElement(M.a,null,r.a.createElement(we.a,{value:e.value,control:r.a.createElement(De.a,null),label:e.name}),r.a.createElement(B.a,null,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",e.option.cost.delivery," \u0440\u0443\u0431\u043b\u0435\u0439 ")):null}function Be(e){var t;return e.options?r.a.createElement(Ie.a,{component:"fieldset",className:e.className,style:{paddingBottom:20}},r.a.createElement(Se.a,{"aria-label":"quiz",name:e.name,value:null!==(t=e.value)&&void 0!==t?t:"",onChange:function(t){e.resetError(),e.setValue(t.target.value)}},r.a.createElement(Ne,{option:e.options.POST,name:"\u041f\u043e\u0447\u0442\u0430",value:"POST"}),r.a.createElement(Ne,{option:e.options.COURIER,name:"\u041a\u0443\u0440\u044c\u0435\u0440",value:"COURIER"})),r.a.createElement(_e.a,{error:!0},e.helperText)):null}var Re=Object(S.b)((function(e){return{order:e.order}}),(function(e){return{returnToContacts:function(){return e((function(e){e({type:"RETURN_TO_CONTACTS"})}))},setAddress:function(t){return e(function(e){return function(t){t({type:"SET_ADDRESS",payload:e}),e&&e.addressComponents.some((function(e){return"HOUSE"===e.kind}))?fetch("http://".concat(window.location.hostname,"/api/delivery/options/?value=",1e3,"&address=").concat(e.address)).then((function(e){return e.json()})).then((function(e){t({type:"SET_OPTIONS",payload:e})})):t({type:"SET_OPTIONS",payload:null})}}(t))},setDeliverySelected:function(t){return e(function(e){return function(t){t({type:"SET_DELIVERY_SELECTED",payload:e})}}(t))},submitOrder:function(t,a){return e(function(e,t){return function(a){a({type:"SUBMIT_ORDER"}),fetch("http://".concat(window.location.hostname,"/api/orders/"),{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Res"),console.log(e),a({type:"ORDER_SUBMITTED",payload:e}),t()}))}}(t,a))}}}))((function(e){var t=Object(d.f)();return r.a.createElement(T.a,{style:{paddingTop:20,paddingBottom:20}},r.a.createElement(B.a,{component:"h5",variant:"h5",align:"center",style:{paddingBottom:40}},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),r.a.createElement(ge,{submit:function(){var a={name:e.order.contacts.name,email:e.order.contacts.email,phone:e.order.contacts.phone,address:e.order.address,delivery_option:e.order.delivery.selected,items:Object.values(e.order.cart).map((function(e){return function(e){return{item:e.item.id,quantity:e.quantity}}(e)}))};e.submitOrder(a,(function(){return t.push("/order")}))},returnBack:e.returnToContacts},r.a.createElement(ke,{id:"address",label:"\u0410\u0434\u0440\u0435\u0441",value:e.order.address,setValue:e.setAddress,required:!0}),r.a.createElement(Be,{id:"options",label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",value:e.order.delivery.selected,setValue:e.setDeliverySelected,options:e.order.delivery.options,required:!0})))}));var qe=Object(S.b)((function(e){return{orderStep:e.order.step,cartCount:Object.keys(e.order.cart).length}}),(function(e){return{}}))((function(e){var t=E()(),a=!Object(b.a)(t.breakpoints.down("sm"));if(0===e.cartCount)return e.setCartOpen(!1),null;var n=null;return n=0===e.orderStep?r.a.createElement(A.a,{container:!0},r.a.createElement(A.a,{item:!0,sm:12,md:6,style:{width:"100%"}},r.a.createElement(je,null)),r.a.createElement(A.a,{item:!0,sm:12,md:6,style:{width:"100%"}},r.a.createElement(le,null))):1===e.orderStep?r.a.createElement(A.a,{container:!0},r.a.createElement(A.a,{item:!0,sm:12,md:6,style:{width:"100%"}},r.a.createElement(Re,null)),r.a.createElement(A.a,{item:!0,sm:12,md:6,style:{width:"100%"}},r.a.createElement(le,null))):r.a.createElement(J,{loadingText:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430..."}),a||(n=r.a.createElement(y.a,{display:"flex",flexDirection:"column"},r.a.createElement(y.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(K.a,{style:{alignSelf:"end",paddingTop:20,paddingRight:20},fontSize:"large",onClick:function(){e.setCartOpen(!1)}})),n)),r.a.createElement($.a,{onClose:function(){e.setCartOpen(!1)},"aria-labelledby":"\u041a\u043e\u0440\u0437\u0438\u043d\u0430",open:e.cartOpen,maxWidth:"md",fullWidth:!0,fullScreen:!a},n)}));function Ae(e){var t=r.a.useState(!1),a=Object(i.a)(t,2),n=a[0],o=a[1];return r.a.useEffect((function(){if("WAITING_PAYMENT"===e.order.status&&e.order.payment_token&&!n){var t=document.createElement("script");t.src="https://kassa.yandex.ru/checkout-ui/v2.js",t.async=!0,t.onload=function(){new window.YandexCheckout({confirmation_token:e.order.payment_token,return_url:window.location.href,embedded_3ds:!0,error_callback:function(t){console.log(t),"token_expired"===t.error&&(o(!0),setTimeout((function(){return e.loadOrder(e.order.id,e.order.token)}),2e3))}}).render("payment-form")},document.body.appendChild(t)}}),[e.order.payment_token]),"WAITING_PAYMENT"===e.order.status&&e.order.payment_token?r.a.createElement(y.a,{style:{paddingBottom:20}},r.a.createElement(B.a,{variant:"h5",component:"h5",align:"center",paragraph:!0},"\u041e\u043f\u043b\u0430\u0442\u0430"),n?r.a.createElement(J,{variant:"h6",loadingText:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u043f\u043b\u0430\u0442\u044b..."}):r.a.createElement("div",{id:"payment-form",style:{minHeight:400}})):null}function Me(e){return r.a.createElement(y.a,{style:{paddingBottom:20}},r.a.createElement(B.a,{variant:"h5",component:"h5",align:"center",paragraph:!0},"\u0414\u0435\u0442\u0430\u043b\u0438"),r.a.createElement(B.a,{align:"center"},"\u0418\u043c\u044f: ",e.order.name),r.a.createElement(B.a,{align:"center"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",e.order.phone),r.a.createElement(B.a,{align:"center"},"Email: ",e.order.email),r.a.createElement(B.a,{align:"center"},"\u0410\u0434\u0440\u0435\u0441: ",e.order.address.address))}function Le(e){return r.a.createElement(y.a,{style:{paddingBottom:20},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},r.a.createElement(B.a,{variant:"h5",component:"h5",align:"center",paragraph:!0},"\u0422\u043e\u0432\u0430\u0440\u044b"),r.a.createElement(y.a,{display:"flex",flexDirection:"column",justifyContent:"center",style:{width:500,maxWidth:"100%"}},e.order.items.map((function(e){return r.a.createElement(ce,{quantity:e.quantity,item:e.item,key:e.item.id})}))))}function Pe(e){return r.a.createElement(y.a,null,r.a.createElement(B.a,{align:"center",paragraph:!0},"\u0421\u0442\u0430\u0442\u0443\u0441: ",function(e){switch(e){case"WAITING_PAYMENT":return"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u043e\u043f\u043b\u0430\u0442\u044b";case"PAYED":return"\u041e\u043f\u043b\u0430\u0447\u0435\u043d";default:return e}}(e.order.status)),r.a.createElement(Ae,{order:e.order,loadOrder:e.loadOrder}),r.a.createElement(Me,{order:e.order}),r.a.createElement(Le,{order:e.order}))}var Ve=Object(S.b)((function(e){return{order:e.order}}),(function(e){return{loadOrder:function(t,a){return e(function(e,t){return function(a){console.log("Fetch"),fetch("http://".concat(window.location.hostname,"/api/orders/").concat(e,"/?token=").concat(t)).then((function(e){return e.json()})).then((function(e){a({type:"ORDER_LOADED",payload:e})}))}}(t,a))}}}))((function(e){var t=r.a.useState(!e.order.lastOrderId),a=Object(i.a)(t,2),n=a[0],o=a[1],c=r.a.useState(!1),l=Object(i.a)(c,2),u=l[0],d=l[1],s=e.order.lastOrderId,m=e.order.orders[s];r.a.useEffect((function(){n||s?n||(m?u||(e.loadOrder(s,m.token),d(!0)):(o(!0),console.log("Need to load shit"))):o(!0)}),[n,s,e.order.orders]),r.a.useEffect((function(){var t=setInterval((function(){m&&(console.log("Reloading order"),e.loadOrder(s,m.token))}),3e4);return function(){return clearInterval(t)}}),[]);var p=null;if(n)p=r.a.createElement(J,{error:!0});else{var f=null;f=s in e.order.orders?r.a.createElement(Pe,{loadOrder:e.loadOrder,order:e.order.orders[s]}):r.a.createElement(J,null),p=r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{subtitle:"\u0417\u0430\u043a\u0430\u0437 \u2116"+s}),f)}return r.a.createElement(T.a,{style:{paddingTop:20}},p)}));var Ue=Object(S.b)((function(e){return{lastOrderId:e.order.lastOrderId}}),(function(e){return{}}))((function(e){var t=r.a.useState(!1),a=Object(i.a)(t,2),n=a[0],o=a[1],c=[{title:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",url:"/",component:r.a.createElement("p",null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")},{title:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d",url:"/shop",component:r.a.createElement(Z,null)}];return e.lastOrderId&&(c=[].concat(Object(l.a)(c),[{title:"\u041c\u043e\u0439 \u0437\u0430\u043a\u0430\u0437",url:"/order",component:r.a.createElement(Ve,null)}])),r.a.createElement(u.a,null,r.a.createElement(N,{sections:c,image:"http://".concat(window.location.hostname,"/static/logo.png"),setCartOpen:o}),r.a.createElement(_,{setCartOpen:o,floating:!0}),r.a.createElement(qe,{cartOpen:n,setCartOpen:o}),r.a.createElement(T.a,{disableGutters:!0,style:{backgroundColor:"#f6f6f6"}},r.a.createElement(d.c,null,c.map((function(e){return r.a.createElement(d.a,{strict:!0,exact:!0,path:e.url,key:e.url},e.component)})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(207);var ze=a(34),We=a(106),Ge=a(144),Ye=a.n(Ge),Fe=a(8),He={cart:{},step:0,contacts:{name:null,phone:null,email:null},address:null,delivery:{options:null,selected:null},lastOrderId:null,orders:{}};var Je=Object(ze.c)({order:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_ITEM":return(e=a.payload.id)in t.cart?Object(Fe.a)(Object(Fe.a)({},t),{},{cart:Object(Fe.a)(Object(Fe.a)({},t.cart),{},Object(s.a)({},e,{item:a.payload,quantity:t.cart[e].quantity+1}))}):Object(Fe.a)(Object(Fe.a)({},t),{},{step:0===Object.keys(t.cart).length?0:t.step,cart:Object(Fe.a)(Object(Fe.a)({},t.cart),{},Object(s.a)({},e,{item:a.payload,quantity:1}))});case"REMOVE_ITEM":if((e=a.payload.id)in t.cart){if(1===t.cart[e].quantity){var n=Object(Fe.a)({},t.cart);return delete n[e],Object(Fe.a)(Object(Fe.a)({},t),{},{cart:n})}return Object(Fe.a)(Object(Fe.a)({},t),{},{cart:Object(Fe.a)(Object(Fe.a)({},t.cart),{},Object(s.a)({},e,{item:a.payload,quantity:t.cart[e].quantity-1}))})}return t;case"DELETE_ITEM":if((e=a.payload.id)in t.cart){var r=Object(Fe.a)({},t.cart);return delete r[e],Object(Fe.a)(Object(Fe.a)({},t),{},{cart:r})}return t;case"CLEAR_CART":return Object(Fe.a)(Object(Fe.a)({},t),{},{cart:{}});case"SET_NAME":return Object(Fe.a)(Object(Fe.a)({},t),{},{contacts:Object(Fe.a)(Object(Fe.a)({},t.contacts),{},{name:a.payload})});case"SET_PHONE":return Object(Fe.a)(Object(Fe.a)({},t),{},{contacts:Object(Fe.a)(Object(Fe.a)({},t.contacts),{},{phone:a.payload})});case"SET_EMAIL":return Object(Fe.a)(Object(Fe.a)({},t),{},{contacts:Object(Fe.a)(Object(Fe.a)({},t.contacts),{},{email:a.payload})});case"SUBMIT_CONTACTS":return Object(Fe.a)(Object(Fe.a)({},t),{},{step:1});case"RETURN_TO_CONTACTS":return Object(Fe.a)(Object(Fe.a)({},t),{},{step:0});case"SET_ADDRESS":return Object(Fe.a)(Object(Fe.a)({},t),{},{address:a.payload});case"SET_OPTIONS":return Object(Fe.a)(Object(Fe.a)({},t),{},{delivery:Object(Fe.a)(Object(Fe.a)({},t.delivery),{},{options:a.payload,selected:null})});case"SUBMIT_ORDER":return Object(Fe.a)(Object(Fe.a)({},t),{},{step:2});case"SET_DELIVERY_SELECTED":return Object(Fe.a)(Object(Fe.a)({},t),{},{delivery:Object(Fe.a)(Object(Fe.a)({},t.delivery),{},{selected:a.payload})});case"ORDER_SUBMITTED":return console.log(a.payload),Object(Fe.a)(Object(Fe.a)({},t),{},{cart:{},lastOrderId:a.payload.id,orders:Object(Fe.a)(Object(Fe.a)({},t.orders),{},Object(s.a)({},a.payload.id,a.payload))});case"ORDER_LOADED":return Object(Fe.a)(Object(Fe.a)({},t),{},{orders:Object(Fe.a)(Object(Fe.a)({},t.orders),{},Object(s.a)({},a.payload.id,a.payload))});default:return t}}}),Ze=a(145),$e={key:"root",storage:Ye.a},Qe=Object(We.a)($e,Je),Ke=Object(ze.d)(Qe,Object(ze.a)(Ze.a)),Xe=Object(We.b)(Ke),et=a(146);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S.a,{store:Ke},r.a.createElement(et.a,{loading:null,persistor:Xe},r.a.createElement(Ue,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[167,1,2]]]);
//# sourceMappingURL=main.a1b9a681.chunk.js.map